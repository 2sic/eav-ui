<mat-form-field [formGroup]="group" class="eav-mat-form-field" color="accent">
  @if (!freeTextMode()) {
    <mat-select class="eav-translate-on-dblclick"
      [formControlName]="config.fieldName"
      [required]="basics().required"
      [placeholder]="basics().placeholder">
      @for (option of dropdownOptions(); track option) {
        <mat-option [value]="option.value">
          {{ option.label }}
        </mat-option>
      }
    </mat-select>
  }
  @if (freeTextMode()) {
    <input matInput type="number"
      [formControlName]="config.fieldName"
      [required]="basics().required"
      [placeholder]="basics().placeholder">
  }
  @if (enableTextEntry()) {
    <div matSuffix class="selection-suffix">
      <button mat-icon-button [ngClass]="{ 'active': !freeTextMode() }"
        [tippy]="'Fields.String.Dropdown' | translate" [disabled]="controlStatus().disabled"
        (click)="toggleFreeTextMode(false)">
        <mat-icon>search</mat-icon>
      </button>
      <button mat-icon-button [ngClass]="{ 'active': freeTextMode() }" [tippy]="'Fields.String.Freetext' | translate"
        [disabled]="controlStatus().disabled" (click)="toggleFreeTextMode(true)">
        <mat-icon>text_fields</mat-icon>
      </button>
    </div>
  }
  <mat-label>{{ basics().label }}</mat-label>
</mat-form-field>
<app-field-helper-text></app-field-helper-text>
