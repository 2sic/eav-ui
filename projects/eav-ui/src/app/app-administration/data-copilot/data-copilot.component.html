
<div>
  <h1>2sxc Copilot (beta)</h1>
  <p>
    TODO: 2dg - pls find out the best way to have this on top, ideally not boxed but still indented.
  </p>
</div>

<div class="eav-cards-box">
  <mat-card class="eav-card">
    <mat-card-header class="eav-card-header">
      <mat-card-title>2sxc Copilot (beta)</mat-card-title>
      <mat-icon>support_agent</mat-icon>
    </mat-card-header>
    <mat-card-content>
      <!-- TODO @2dm -->
      <p>
        The Copilot provides tools to help you create code. It is still in beta, so please use it carefully and report any issues.
      </p>
      <p>
        This tool will generate <code>[TypeName].Generated.cs</code> files in the <code>AppCode/Data</code> folder.
        Since you could be using different editions (Polymorphism) you must select the edition you want to generate the code for.
        So the root edition would be in <code>/AppCode</code> but a staging edition would be in <code>staging/AppCode</code>.
      </p>

      <!--
      TODO: @2dg
      - get data from backend /admin/code/editions?appId=...
      - note that '' is a valid value - the root
      - make sure they are sorted A-Z
      - default value should always be '' (the root)
      -->

      <form [formGroup]="editionForm">
      <mat-form-field appearance="fill" color="accent" class="eav-form-field eav-scope-dropdown">
        <mat-label>Select an Edition</mat-label>
        <mat-select formControlName="edition">
          @for (edition of editions; track edition) {
          <mat-option [value]="edition">
            {{ edition }}
          </mat-option>
          }
        </mat-select>
      </mat-form-field>
    </form>

    </mat-card-content>
    <div class="eav-card-space-div"></div>
    <mat-card-actions align="start">
      <!--
        @2dg - this should always be enabled
        - with edition, call admin/code/GenerateDataModels?appId=...&edition=...
      -->
      <button [disabled]="editionForm.get('edition').value === ''" mat-button class="eav-button__with-icon"
        (click)="autoGeneratedCode()">
        <mat-icon class="eav-icon">code</mat-icon>
        <span>Generate Code</span>
      </button>
    </mat-card-actions>
  </mat-card>
</div>


