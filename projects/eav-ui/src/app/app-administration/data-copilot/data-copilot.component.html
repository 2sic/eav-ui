<div class="outer-container">
  <h1>2sxc Copilot (beta)</h1>
  <p>
    The Copilot provides tools to help you create code. It is still in beta, so please use it carefully and report
    any issues.
  </p>
</div>

<div class="eav-cards-box">
  <mat-card class="eav-card">
    <mat-card-header class="eav-card-header">
      <mat-card-title>Data Model Copilot (beta)</mat-card-title>
      <mat-icon>support_agent</mat-icon>
    </mat-card-header>
    <mat-card-content>
      <p>
        This tool will generate <code>[TypeName].Generated.cs</code> files in the <code>AppCode/Data</code> folder.
      </p>
      <p>
        Select the edition to generate code for.
        Editions are managed in the <code>/App_Data/app.json</code> file.
        See <a href="https://go.2sxc.org/app.json" target="_blank">docs</a>.
      </p>

      <!--
      TODO: @2dg
      - get data from backend /admin/code/editions?appId=... ?? 404 Error
      - note that '' is a valid value - the root
      - default value should always be '' (the root)
      -->

      <form [formGroup]="editionForm">
        <mat-form-field appearance="fill" color="accent" class="eav-form-field eav-scope-dropdown">
          <mat-label>Select an Edition</mat-label>
          <mat-select formControlName="edition">
            @if (editions$ | async; as editions) {
              @for (edition of editions.sort() ; track edition) {
              <mat-option [value]="edition.name">
                <strong>{{ edition.label }}</strong> ({{ edition.description }})
              </mat-option>
              }
            }
          </mat-select>
        </mat-form-field>
      </form>

    </mat-card-content>
    <div class="eav-card-space-div"></div>
    <mat-card-actions align="end">
      <button mat-button class="eav-button__with-icon" (click)="autoGeneratedCode()">
        <mat-icon class="eav-icon">code</mat-icon>
        <span>Generate Code</span>
      </button>
    </mat-card-actions>
  </mat-card>
</div>
