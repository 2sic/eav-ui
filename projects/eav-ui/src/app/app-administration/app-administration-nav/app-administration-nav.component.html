<ng-container appToggleDebug *ngIf="viewModel$ | async as vm">
  <mat-toolbar>
    <div class="toolbar-container">
      <div>
        <img (click)="sidenav.opened = !sidenav.opened" *ngIf="vm.dialogSettings?.Context.App.Icon"
          [src]="vm.dialogSettings?.Context.App.Icon + '?w=40&h=40&mode=crop'" />
      </div>
      <div>
        <ng-container *ngIf="
              vm.dialogSettings?.Context.App.SettingsScope === AppScopes.Global
            ">
          Global
        </ng-container>
        <ng-container *ngIf="
              vm.dialogSettings?.Context.App.SettingsScope !== AppScopes.Global
            ">
          {{ vm.dialogSettings?.Context.App.Name }}
        </ng-container>
        <span class="toolbar-admin">
          Admin
        </span>
      </div>

      <div>
        <xng-breadcrumb [separator]="emptyTemplate">
          <ng-container *xngBreadcrumbItem="let breadcrumb; let info = info; let last = last">
            <ng-container *ngIf="info === 'home' && last">Home</ng-container>
            <ng-container *ngIf="last">{{ breadcrumb }}</ng-container>
          </ng-container>
        </xng-breadcrumb>
        <ng-template #emptyTemplate></ng-template>
      </div>
    </div>

    <span class="toolbar-spacer"></span>
    <button mat-icon-button tippy="Close dialog" (click)="closeDialog()">
      <mat-icon>close</mat-icon>
    </button>
  </mat-toolbar>
  <mat-sidenav-container>

    <mat-sidenav #sidenav [mode]="smallScreen.matches ? 'over' : 'side'" [opened]="sideNavOpened">
      <div *ngFor="let item of navItems">
        <a (click)="changeUrl(item.path)" [routerLink]="item.path" routerLinkActive="active" matRipple
          class="app-menu-container" [tippy]="item.tippy">
          <mat-icon>{{ item.icon }}</mat-icon>
          <div class="link-text">{{ item.name }}</div>
        </a>

      </div>
      <div class="sideNav-info">
        <p>use App logo to show/hide menu</p>
      </div>
    </mat-sidenav>

    <mat-sidenav-content>
      <router-outlet></router-outlet>

      <div class="container-content">
        <app-getting-started *ngIf="vm.currentPath === 'home'"
          [gettingStartedUrl]="vm.dialogSettings.Context.App.GettingStartedUrl">
        </app-getting-started>

        <app-data *ngIf="vm.currentPath === 'data'"
          [enablePermissions]="vm.dialogSettings.Context.Enable.AppPermissions">
        </app-data>

        <app-queries *ngIf="vm.currentPath === 'queries'"
          [enablePermissions]="vm.dialogSettings.Context.Enable.AppPermissions">
        </app-queries>

        <app-views *ngIf="vm.currentPath === 'views'" [enableCode]="vm.dialogSettings.Context.Enable.CodeEditor"
          [enablePermissions]="vm.dialogSettings.Context.Enable.AppPermissions"
          [appIsGlobal]="vm.dialogSettings.Context.App.IsShared"
          [appIsInherited]="vm.dialogSettings.Context.App.IsInherited">
        </app-views>

        <app-web-api *ngIf="vm.currentPath === 'web-api'" [enableCode]="vm.dialogSettings.Context.Enable.CodeEditor">
        </app-web-api>

        <app-app-configuration *ngIf="vm.currentPath === 'app'" [dialogSettings]="vm.dialogSettings">
        </app-app-configuration>

        <app-sync-configuration *ngIf="vm.currentPath === 'sync'" [dialogSettings]="vm.dialogSettings">
        </app-sync-configuration>
      </div>
    </mat-sidenav-content>
  </mat-sidenav-container>
</ng-container>
