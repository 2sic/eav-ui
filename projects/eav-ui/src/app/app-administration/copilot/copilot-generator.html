<div style="display: flex; align-items: center; justify-content: space-between; gap: 8px; padding: 0 16px;">
      <h3 class="mat-subtitle-1">Configurations ({{ (entities$ | async)?.length || 0 }})</h3>
      <button mat-fab mat-elevation-z24 class="grid-fab" tippy="Add Configuration" tippyPlacement="left" (click)="editConfig()">
        <mat-icon>add</mat-icon>
      </button>
    </div>

    @if (entities$ | async; as entities) {
      @if (entities.length === 0) {
        <p class="mat-body-1">No configurations yet. Click + to create one.</p>
      } @else {
        <div style="padding: 0 16px;">
          <table mat-table [dataSource]="entities" class="mat-elevation-z2">
            <ng-container matColumnDef="title">
              <th mat-header-cell *matHeaderCellDef>Name</th>
              <td mat-cell *matCellDef="let entity" (click)="editConfig(entity)">
                {{ entity.Title || '(Untitled)' }}
              </td>
            </ng-container>
            <ng-container matColumnDef="generator">
              <th mat-header-cell *matHeaderCellDef>Generator</th>
              <td mat-cell *matCellDef="let entity" (click)="editConfig(entity)">
                {{ entity.CodeGenerator || '-' }}
              </td>
            </ng-container>
            <ng-container matColumnDef="actions">
              <th mat-header-cell *matHeaderCellDef style="width: auto; padding: 8px 4px; text-align: center;">Actions</th>
              <td mat-cell *matCellDef="let entity" (click)="$event.stopPropagation()" style="padding: 8px 4px; text-align: center; white-space: nowrap;">
                <div style="display: flex; align-items: center; gap: 8px; justify-content: center;">
                  <button mat-button class="eav-button__with-icon" (click)="generateForConfiguration(entity)" tippy="Generate Code" tippyPlacement="top">
                    <mat-icon class="eav-icon">code</mat-icon>
                    <span>Generate Code</span>
                  </button>
                  <button mat-icon-button (click)="deleteConfiguration(entity)" tippy="Delete" tippyPlacement="top">
                    <mat-icon>delete</mat-icon>
                  </button>
                </div>
              </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
          </table>
        </div>
      }
    }
    
<div style="max-width: 400px; margin-top: 24px; margin-left: 16px;">
  <mat-card>
    <mat-card-content>
      <h3 class="mat-subtitle-1">Quick Generate</h3>
      <br />

      <div style="max-width: 400px;">
        <mat-form-field color="accent" class="eav-mat-form-field">
          <mat-label>Generator</mat-label>
          <mat-select required [(value)]="selectedGeneratorName">
            <mat-select-trigger>
              {{ selectedGeneratorName() }}
            </mat-select-trigger>
            @for (generator of generators().sort(); track generator) {
              <mat-option [value]="generator.name">
                <strong>{{ generator.name }} v{{ generator.version }}</strong><br />
                {{ generator.description }}
              </mat-option>
            }
          </mat-select>
          @if (selectedGenerator(); as selectedGenerator) {
            <mat-hint [innerHTML]="selectedGenerator.descriptionHtml"></mat-hint>
          }
        </mat-form-field>
        <br />
        <br />

        @if (editions(); as editions) {
          <mat-form-field color="accent" class="eav-mat-form-field">
            <mat-label>Select an Edition to generate code for</mat-label>
            <mat-select required [(value)]="selectedEdition">
              @for (edition of editions.sort(); track edition) {
                <mat-option [value]="edition.name">
                  <strong>{{ edition.label }}</strong> ({{ edition.description }})
                </mat-option>
              }
            </mat-select>
            <mat-hint>
              Editions are managed in the <code>/App_Data/app.json</code> file. See
              <a href="https://go.2sxc.org/app-json" target="_blank">docs</a>.
            </mat-hint>
          </mat-form-field>
        }

        <br />
        <div style="display: flex; justify-content: flex-end;">
          <button mat-button class="eav-button__with-icon" (click)="autoGeneratedCode()">
            <mat-icon class="eav-icon">code</mat-icon>
            <span>Generate Code</span>
          </button>
        </div>
      </div>
    </mat-card-content>
  </mat-card>
</div>

<router-outlet></router-outlet>
